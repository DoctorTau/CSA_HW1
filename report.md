# **Отчет о выполнении Домашнего задания №1**
## *Выполнил* Шатравка Даниил Алексанрович БПИ212
## *Вариант 38*

---

# На 4 балла
### Привести решение на языке C
Решение представленно в файлах:
- [Основной файл](./main.c)
- [Ввод первого массива](./fill.c)
- [Вывод второго массива](./out.c)
- [Заполнение второго массива](./genArr.c)

### Комментарии в ассемблер
В ассемблер файлах написанны комметарии представляющие описание комманд ассемблера.
Файлы:
- [Ассемблер код основного файла](./main.o)
- [Ассемблер код функции ввода первого массива](./fill.o)
- [Ассемблер код функции вывода второго массива](./out.o)
- [Ассемблер кол функции заполнения второго массива](./genArr.o)

### Компеляция 
Программа была откомпелированна с помощью флагов 
```
gcc -masm=intel \
    -fno-asynchronous-unwind-tables \
    -fno-jump-tables \
    -fno-stack-protector \
    -fno-exceptions \
    ./code.c \
    -S -o ./code.s
```

Файлы собраны в объектные:

`gcc ./main.c -c -o ./main.o`

Линковка программы:

`gcc ./fill.o ./out.o ./genArr.o main.o -o prog.exe`

### Тесты
Тестовое покрытие находится в [папке тестов](./tests/)

Входные данные имеют расширение **.in**

Выходные данные имеют расширение **.out**

Результаты тестовых прогонов совпали с ожидаемыми выходными данными.

---

# На 5 баллов 

## Функции с передачей данных:
в программе реализованно 3 функции с передачей данных:
```
InputArrayA(int size);
PrintArrayB(int size);
GenerateNewArray(int size);
```

## Локальные переменные
В коде функций используются локальные переменные:

`int i, j, size, new_size;`

## Передача параметров
В комментариях к [ассемблер файлам](#комментарии-в-ассемблер) добавлена информация о передаче параметров черезз регистры.

---

# На 6 баллов
## Использование регистров процессора
Переменные, которые раньше находились на стеке, перемещены на регистры процессора.

### Изменения в main.s
` DWORD PTR -8[rbp] -> r12d`

` DWORD PTR -4[rbp] -> r13d`
### Изменения в genArr.s
` DWORD PTR -8[rbp] -> r14d`

` DWORD PTR -4[rbp] -> r13d`

Данное изменение уменьшит количество запросов на стек, что уменьшит время работы программы.

Тестовые прогоны совпадают с рущультатоми тестовых прогонов до выполнения рефакторинга.

Результаты тестовых прогонов находятся в [данной папке](./tests_aftrer_ref/).


# На 7 баллов

### Единицы компиляции
Программа скомпилирована с использованим [4-х единиц компиляции](#комментарии-в-ассемблер).

### Задание файла с исходными и выходными данными
Для решения данной задачи была создана другая программа, которая находится в [данной папке](./ProgramWithFileInput/)

Пример запуска из корневой директории данного проекта:

`ProgramWithFileInput/main.exe ProgramWithFileInput/input.in ProgramWithFileInput/output.out`